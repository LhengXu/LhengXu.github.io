<!doctype html>
<html ⚡ lang="en-us">
  <head>
    <meta charset="utf-8" />
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>

    
    

    
    <title>Spring学习笔记</title>

    
    



  
  
  <meta name="author" content="Bubble" />
  <meta name="description" content="Spring学习笔记 一、Spring入门案例  通过Idea创建maven项目 配置spring配置文件ApplicationContext.xml 编写接口及实现类 IaccountDao
```java /**
 账户的持久层接口 */ public interface IAccountDao {
/**
 模拟保存账户 */ void saveAccount(); }
 - IaccountService ```java /** * 账户业务层的接口 */ public interface IAccountService { /** * 模拟保存账户 */ void saveAccount(); }      AccountDaoImpl
```java /**
 账户的持久层实现类 */ public class AccountDaoImpl implements IAccountDao {
public void saveAccount(){
System.out.println(&amp;quot;保存了账户&amp;quot;);  } }
 - AccountServiceImpl ```java /** * 账户的业务层实现类 */ public class AccountServiceImpl implements IAccountService { private IAccountDao accountDao = new AccountDaoImpl(); public void saveAccount(){ accountDao.">

  
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@gohugoio" />
    <meta name="twitter:title" content="Spring学习笔记" />
    <meta name="twitter:description" content="Spring学习笔记 一、Spring入门案例  通过Idea创建maven项目 配置spring配置文件ApplicationContext.xml 编写接口及实现类 IaccountDao
```java /**
 账户的持久层接口 */ public interface IAccountDao {
/**
 模拟保存账户 */ void saveAccount(); }
 - IaccountService ```java /** * 账户业务层的接口 */ public interface IAccountService { /** * 模拟保存账户 */ void saveAccount(); }      AccountDaoImpl
```java /**
 账户的持久层实现类 */ public class AccountDaoImpl implements IAccountDao {
public void saveAccount(){
System.out.println(&amp;quot;保存了账户&amp;quot;);  } }
 - AccountServiceImpl ```java /** * 账户的业务层实现类 */ public class AccountServiceImpl implements IAccountService { private IAccountDao accountDao = new AccountDaoImpl(); public void saveAccount(){ accountDao." />
    <meta name="twitter:image" content="https://LhengXu.github.io/img/avatar.jpg" />
  




<meta name="generator" content="Hugo 0.55.6">


<link rel="canonical" href="https://LhengXu.github.io/post/spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
<link rel="alternative" href="/index.xml" title="Bubble" type="application/atom+xml">


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="format-detection" content="telephone=no,email=no,adress=no" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />
<meta name="google-site-verification" content="google_site_verification_code" />
<meta name="msvalidate.01" content="bing_site_verification_code" />


<link rel="icon" href="/img/favicon.ico" />
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" sizes="120x120" href="/img/avatar.jpg">


<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400" rel="stylesheet">
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>/*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}body{font-size:18px;font-weight:300;line-height:1.618;font-family:Roboto,sans-serif;color:#777;background:#fff;text-rendering:optimizeLegibility;-webkit-overflow-scrolling:touch}a{color:#3f9adc;text-decoration:none;font-weight:600}a:focus,a:hover{opacity:.7;outline:none}amp-img{margin:0 auto;box-shadow:2px 20px 40px 10px rgba(0,0,0,.15)}button:hover{cursor:pointer}.main{margin-left:20rem;padding:1rem 2rem;max-width:100%;min-height:100vh;box-sizing:border-box}@media screen and (max-width:1440px){.main{width:calc(100% - 20rem)}}@media (min-width:800px) and (max-width:960px){.main{margin-left:15rem;width:calc(100% - 15rem)}}@media screen and (max-width:800px){.main{margin-left:0;padding:0 1rem 1rem;width:100%;min-height:0;border-left:none;border-right:none;border-top:1px solid #ddd;border-bottom:1px solid #ddd}}.footer{display:none}@media screen and (max-width:800px){.footer{display:block;padding:1rem;font-size:.8rem;text-align:center;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace}}.icon{font-style:normal;text-decoration:inherit;width:1em;height:1em;font-variant:normal;text-transform:none;line-height:1em}.icon,.share{display:inline-block;text-align:center}.share{font-weight:400;margin-left:.2rem;border:none;outline:none;color:#fff;width:30px;height:30px;border-radius:50%}.share-twitter{background-color:#55acee}.share-twitter-icon{margin:5px 0 0 1px}.share-facebook{background-color:#3b5998}.share-google{background-color:#dd4b39}.header{position:fixed;left:0;top:0;bottom:0;width:20rem;padding:1rem;box-sizing:border-box;text-align:center;background-color:rgba(106,172,14,.9)}@media screen and (max-width:800px){.header{width:100%;position:relative}}@media (min-width:800px) and (max-width:960px){.header{width:15rem}}.logo{margin-top:3rem;border-radius:20%;border:4px solid #fff;transition:all .5s ease-out}.logo:hover{border-radius:50%;box-shadow:0 1px 4px rgba(0,0,0,.3)}@media screen and (max-width:800px){.logo{position:absolute;top:1rem;left:1rem;width:2rem;height:2rem;margin-top:0;border:2px solid #fff}}.title{font-size:1.5rem;font-family:Roboto,sans-serif;font-weight:600;margin:1rem auto}@media screen and (max-width:800px){.title{margin:0 auto}}.subtitle,.title a{color:#fff}.subtitle{margin-bottom:1rem;opacity:.8}.menu{display:none}@media screen and (min-width:800px){.menu{display:block}}.menu-list{list-style:none;padding:0}.menu-item{padding:1rem 0}.menu-item a{font-weight:100;opacity:.8;color:#fff}.menu-item a:focus,.menu-item a:hover{opacity:1}.menu-item.is-active a{color:#444;opacity:1;font-weight:700}.menu-toggle{border:none;outline:none;font-size:2rem;background-color:transparent;color:#fff;position:absolute;top:1rem;right:1rem}@media screen and (min-width:800px){.menu-toggle{display:none}}.sidebar{background-color:#fff;width:100vw}@media screen and (min-width:640px){.sidebar{width:50vw}}.sidebar-list{list-style:none;padding:0;margin:0}.sidebar-menu{text-align:right;padding:16px}.sidebar-item{font-size:2rem;padding:30px 35px 30px 25px;border-top:1px solid #ddd}.sidebar-item:hover{background-color:#f2f2f2}.sidebar-icon{border:none;outline:none;background-color:transparent;font-family:Roboto,sans-serif;font-weight:100;font-size:2rem}.sidebar-link{color:#000;font-weight:100}.social-list{margin:0;padding:0;list-style:none}@media screen and (min-width:800px){.social-list{position:absolute;bottom:10px;left:0;right:0}}.social-item{display:inline-block;margin:0 .2rem}.social-item a{color:#fff;font-weight:400}.entry-list{background-color:#f2f2f2}@media screen and (max-width:800px){.entry-list{padding-top:30px}}.entry-single{line-height:1.8;margin-bottom:22px;background-color:#fff;box-shadow:0 0 2px 0 rgba(137,146,177,.15),0 3px 10px 0 rgba(137,146,177,.1);border-radius:5px}.entry-single:hover{box-shadow:0 1px 15px 0 rgba(137,146,177,.15),0 10px 20px 0 rgba(137,146,177,.15)}.entry-cover{max-width:100%;border-radius:5px 5px 0 0;-o-object-fit:cover;object-fit:cover;box-shadow:none}.entry-title{margin:0;padding:20px 30px 0}.entry-link{font-size:1.5rem;font-weight:600;color:#262626}.entry-summary{padding:0 30px;text-align:justify;max-height:4rem;overflow:hidden}.entry-footer{margin:0 30px;padding:10px 0;border-top:1px solid #ddd;display:flex;justify-content:space-between}.entry-meta{margin:0;font-size:.8rem;letter-spacing:1px;text-transform:uppercase}.entry-time{color:#444}.entry-time:after{content:"";border-right:1px solid #ddd;margin:0 8px 0 10px}.pagination{display:flex;justify-content:flex-start}.pagination-btn{color:#777;padding:.8rem;background-color:#fff;border:1px solid #ddd;font-size:.8rem;text-transform:uppercase;border-radius:5px}.pagination-btn:focus,.pagination-btn:hover{color:#fff;background-color:#6aac0e;border-color:#6aac0e}.pagination-next{margin-left:auto}.post-header:after{display:block;content:"";border-bottom-width:3px;border-bottom-style:solid;width:60px;padding-top:10px;border-bottom-color:#6aac0e}.post-title{font-size:2rem;color:#262626;line-height:1.5;margin-top:1.5rem;margin-bottom:.5rem}.post-footer{margin:1rem 0;line-height:1.8}.post-tags{margin-top:0;margin-bottom:1rem;padding-left:0}.post-tag{display:inline-block;margin:0 .5rem 0 0;border-radius:3px;padding:5px 10px;background:#f2f2f2;font-size:.8rem}.post-tag:hover{background:#ddd;box-shadow:0 1px 15px 0 rgba(137,146,177,.15),0 10px 20px 0 rgba(137,146,177,.15)}.post-content{line-height:1.8}.post-content h1,.post-content h2,.post-content h3,.post-content h4,.post-content h5,.post-content h6{color:#6cb505;font-weight:700;line-height:1.125}.post-content h1{margin-top:2rem;margin-bottom:1rem;font-size:2rem}.post-content h2{margin-top:1.75rem;margin-bottom:.75rem;font-size:1.5rem}.post-content h3{margin-top:1.5rem;margin-bottom:.5rem;font-size:1.25rem}.post-content h4{margin-top:1.25rem;margin-bottom:.25rem;font-size:1rem}.post-content h5,.post-content h6{margin-top:1rem;margin-bottom:0;font-size:.8rem}.post-content li+li{margin-top:.5rem}.post-content em{color:#777;font-style:italic}.post-content strong{color:#444}.post-content del{color:#777;text-decoration:line-through}.post-content ins{color:#444;text-decoration:underline}.post-content hr{position:relative;margin:2rem auto;border-top:1px dashed #ddd;border-bottom:none}.post-content hr:before{content:"sep line";position:absolute;top:-12px;left:calc(50% - 40px);padding:0 .5rem;background-color:#fff;color:#ddd;font-size:.8rem;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace}.post-content p{margin-top:1.5rem;margin-bottom:1.5rem;text-align:justify}.post-content blockquote{background-color:#f2f2f2;border-left:5px solid #ddd;padding:.5rem 1rem;margin:2rem 0}.post-content blockquote p{margin-top:.5rem;margin-bottom:.5rem}.post-content blockquote cite{margin-top:1.5rem;color:#777;font-size:.9rem}.post-content code,.post-content tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:.9em;background-color:#ddd;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace}.post-content code:after,.post-content code:before,.post-content tt:after,.post-content tt:before{letter-spacing:-.2em;content:"\00a0"}.post-content kbd{display:inline-block;padding:.25em;background-color:#f2f2f2;border:1px solid #ddd;border-bottom-color:#ddd;border-radius:3px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.05);font-size:.8em;line-height:1.25;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace;color:#777}.post-content pre{margin:2rem auto;padding:1rem;overflow-x:auto;border-radius:3px;font-size:.9rem;line-height:1.618;white-space:pre;word-wrap:normal;word-break:normal;background:#ddd;color:#777}.post-content pre code{font-size:.9rem;background-color:transparent}.post-content pre code:after,.post-content pre code:before{content:none}.post-content sub,.post-content sup{font-size:.8rem}.post-content sub a,.post-content sub a:focus,.post-content sub a:hover,.post-content sup a,.post-content sup a:focus,.post-content sup a:hover{border-bottom:none}.post-content ol{margin-left:0;margin-top:2rem;margin-bottom:2rem;padding-left:1.5rem;list-style:decimal outside}.post-content ol ol{margin-top:.5rem;margin-bottom:.5rem;list-style:lower-roman outside}.post-content ol ul{margin-top:.5rem;margin-bottom:.5rem;list-style:disc outside}.post-content ul{margin-left:0;margin-top:2rem;margin-bottom:2rem;padding-left:1.5rem;list-style:disc outside}.post-content ul ul{margin-top:.5rem;margin-bottom:.5rem;list-style:circle outside}.post-content ul ol{margin-top:.5rem;margin-bottom:.5rem;list-style:decimal outside}.post-content dl{margin-top:2rem;margin-bottom:2rem}.post-content dl dt{color:#6aac0e;margin-top:1rem}.post-content dl dt:after{content:":"}.post-content dl dd{text-indent:2rem;margin-left:0;margin-top:.25rem}.post-content figure{display:block;margin:2rem auto}.post-content figure img{max-width:100%;box-shadow:2px 20px 40px 10px rgba(0,0,0,.15)}@media screen and (max-width:800px){.post-content figure img{box-shadow:none}}.post-content figure figcaption h4{color:#ddd;font-size:.9rem;text-align:center}table{background-color:#f2f2f2;color:#444;margin:2rem auto;width:100%;border-collapse:collapse;border-radius:5px}table td,table th{border:1px solid #ddd;border-width:0 0 1px;padding:.5em .75em;vertical-align:center}table th{color:#444}table tr:hover{background-color:#ddd}table thead td,table thead th{border-width:0 0 2px;color:#777}table tfoot td,table tfoot th{border-width:2px 0 0;color:#777}table tbody tr:last-child td,table tbody tr:last-child th{border-bottom-width:0}table tr:first-child th:first-child{border-top-left-radius:5px}table tr:first-child th:last-child{border-top-right-radius:5px}table tr:last-child td:first-child{border-bottom-left-radius:5px}table tr:last-child td:last-child{border-bottom-right-radius:5px}.not-found{margin:5rem auto 0;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace;text-align:center}.error-emoji{color:#444;font-size:3rem}.error-text{font-size:1.25rem}.error-link{margin-top:2rem;font-size:1rem;color:#6aac0e}</style>

  </head>
  <body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-rss" viewBox="0 0 24 24">
    <title>RSS</title>
    <path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-email" viewBox="0 0 24 24">
    <title>Email</title>
    <path d="M24 4.5v15c0 .85-.65 1.5-1.5 1.5H21V7.387l-9 6.463-9-6.463V21H1.5C.649 21 0 20.35 0 19.5v-15c0-.425.162-.8.431-1.068C.7 3.16 1.076 3 1.5 3H2l10 7.25L22 3h.5c.425 0 .8.162 1.069.432.27.268.431.643.431 1.068z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-twitter" viewBox="0 0 24 24">
    <title>Twitter</title>
    <path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-github" viewBox="0 0 24 24">
    <title>GitHub</title>
    <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-dribbble" viewBox="0 0 24 24">
    <title>Dribbble</title>
    <path d="M12 24C5.385 24 0 18.615 0 12S5.385 0 12 0s12 5.385 12 12-5.385 12-12 12zm10.12-10.358c-.35-.11-3.17-.953-6.384-.438 1.34 3.684 1.887 6.684 1.992 7.308 2.3-1.555 3.936-4.02 4.395-6.87zm-6.115 7.808c-.153-.9-.75-4.032-2.19-7.77l-.066.02c-5.79 2.015-7.86 6.025-8.04 6.4 1.73 1.358 3.92 2.166 6.29 2.166 1.42 0 2.77-.29 4-.814zm-11.62-2.58c.232-.4 3.045-5.055 8.332-6.765.135-.045.27-.084.405-.12-.26-.585-.54-1.167-.832-1.74C7.17 11.775 2.206 11.71 1.756 11.7l-.004.312c0 2.633.998 5.037 2.634 6.855zm-2.42-8.955c.46.008 4.683.026 9.477-1.248-1.698-3.018-3.53-5.558-3.8-5.928-2.868 1.35-5.01 3.99-5.676 7.17zM9.6 2.052c.282.38 2.145 2.914 3.822 6 3.645-1.365 5.19-3.44 5.373-3.702-1.81-1.61-4.19-2.586-6.795-2.586-.825 0-1.63.1-2.4.285zm10.335 3.483c-.218.29-1.935 2.493-5.724 4.04.24.49.47.985.68 1.486.08.18.15.36.22.53 3.41-.43 6.8.26 7.14.33-.02-2.42-.88-4.64-2.31-6.38z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-linkedin" viewBox="0 0 24 24">
    <title>LinkedIn</title>
    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-facebook" viewBox="0 0 60 60">
    <title>Facebook</title>
    <path d="M42.8,23.8h-7.4v-4.8c0-1.8,1.2-2.2,2.1-2.2c0.8,0,5.2,0,5.2, 0v-8l-7.2,0c-8,0-9.8,6-9.8,9.8v5.3 h-4.6V32h4.6c0,10.6,0,23.3,0,23.3h9.7c0,0,0-12.9,0-23.3H42L42.8,23.8z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-instagram" viewBox="0 0 24 24">
    <title>Instagram</title>
    <path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-youtube" viewBox="0 0 24 24">
    <title>YouTube</title>
    <path class="a" d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-googleplus" viewBox="0 0 24 24">
    <title>Google+</title>
    <path d="M7.635 10.909v2.619h4.335c-.173 1.125-1.31 3.295-4.331 3.295-2.604 0-4.731-2.16-4.731-4.823 0-2.662 2.122-4.822 4.728-4.822 1.485 0 2.479.633 3.045 1.178l2.073-1.994c-1.33-1.245-3.056-1.995-5.115-1.995C3.412 4.365 0 7.785 0 12s3.414 7.635 7.635 7.635c4.41 0 7.332-3.098 7.332-7.461 0-.501-.054-.885-.12-1.265H7.635zm16.365 0h-2.183V8.726h-2.183v2.183h-2.182v2.181h2.184v2.184h2.189V13.09H24" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-pinterest" viewBox="0 0 24 24">
    <title>Pinterest</title>
    <path d="M8.134 18.748c0-1.6.2-3 .8-4.4.5-1.4 1.2-2.6 2.2-3.6.9-1 2-1.9 3.2-2.6 1.2-.8 2.5-1.3 3.9-1.7 1.5-.4 2.9-.5 4.4-.5 2.2 0 4.3.4 6.2 1.4 1.9.9 3.5 2.3 4.7 4.1 1.2 1.9 1.8 3.9 1.8 6.2 0 1.4-.1 2.7-.4 4-.2 1.3-.7 2.6-1.2 3.8-.6 1.2-1.3 2.3-2.2 3.2-.8.9-1.8 1.7-3.1 2.2-1.2.6-2.5.9-4 .9-1 0-1.9-.3-2.9-.7-.9-.5-1.6-1.1-2-1.9-.1.5-.3 1.4-.6 2.4-.3 1.1-.4 1.7-.5 2-.1.3-.2.9-.4 1.6-.3.7-.4 1.2-.6 1.5-.1.3-.4.7-.7 1.3-.3.6-.6 1.2-1 1.7-.3.5-.7 1.1-1.3 1.8l-.3.1-.2-.2c-.2-2.2-.3-3.6-.3-4 0-1.3.2-2.8.5-4.4.3-1.7.8-3.7 1.4-6.2.6-2.5 1-3.9 1.1-4.4-.5-.9-.7-2.1-.7-3.6 0-1.2.4-2.3 1.1-3.3.8-1.1 1.7-1.6 2.8-1.6.9 0 1.6.3 2.1.9.4.6.7 1.3.7 2.2 0 .9-.3 2.3-1 4.1-.6 1.8-.9 3.1-.9 4 0 .9.3 1.6 1 2.2.6.6 1.4.9 2.3.9.8 0 1.5-.2 2.2-.5.6-.4 1.2-.9 1.6-1.5.5-.6.9-1.3 1.2-2 .4-.8.6-1.5.8-2.4.2-.8.4-1.6.5-2.4.1-.7.1-1.4.1-2.1 0-2.5-.8-4.4-2.3-5.8-1.6-1.4-3.6-2.1-6.1-2.1-2.8 0-5.2 1-7.1 2.8-1.9 1.9-2.9 4.2-2.9 7.1 0 .6.1 1.2.3 1.8.2.6.4 1.1.6 1.4.2.3.4.7.5 1 .2.3.3.5.3.6 0 .4-.1.9-.3 1.6-.2.6-.5 1-.8 1 0 0-.1-.1-.4-.1-.7-.2-1.3-.6-1.9-1.2-.5-.6-1-1.3-1.3-2-.3-.8-.5-1.6-.7-2.4-.2-.7-.2-1.5-.2-2.2z" />
  </symbol>
</svg>

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="icon-reddit" viewBox="0 0 24 24">
    <title>Reddit icon</title>
    <path d="M2.204 14.049c-.06.276-.091.56-.091.847 0 3.443 4.402 6.249 9.814 6.249 5.41 0 9.812-2.804 9.812-6.249 0-.274-.029-.546-.082-.809l-.015-.032c-.021-.055-.029-.11-.029-.165-.302-1.175-1.117-2.241-2.296-3.103-.045-.016-.088-.039-.126-.07-.026-.02-.045-.042-.067-.064-1.792-1.234-4.356-2.008-7.196-2.008-2.815 0-5.354.759-7.146 1.971-.014.018-.029.033-.049.049-.039.033-.084.06-.13.075-1.206.862-2.042 1.937-2.354 3.123 0 .058-.014.114-.037.171l-.008.015zm9.773 5.441c-1.794 0-3.057-.389-3.863-1.197-.173-.174-.173-.457 0-.632.176-.165.46-.165.635 0 .63.629 1.685.943 3.228.943 1.542 0 2.591-.3 3.219-.929.165-.164.45-.164.629 0 .165.18.165.465 0 .645-.809.808-2.065 1.198-3.862 1.198l.014-.028zm-3.606-7.573c-.914 0-1.677.765-1.677 1.677 0 .91.763 1.65 1.677 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm7.233 0c-.914 0-1.678.765-1.678 1.677 0 .91.764 1.65 1.678 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm4.548-1.595c1.037.833 1.8 1.821 2.189 2.904.45-.336.719-.864.719-1.449 0-1.002-.815-1.816-1.818-1.816-.399 0-.778.129-1.09.363v-.002zM2.711 9.963c-1.003 0-1.817.816-1.817 1.818 0 .543.239 1.048.644 1.389.401-1.079 1.172-2.053 2.213-2.876-.302-.21-.663-.329-1.039-.329v-.002zm9.217 12.079c-5.906 0-10.709-3.205-10.709-7.142 0-.275.023-.544.068-.809C.494 13.598 0 12.729 0 11.777c0-1.496 1.227-2.713 2.725-2.713.674 0 1.303.246 1.797.682 1.856-1.191 4.357-1.941 7.112-1.992l1.812-5.524.404.095s.016 0 .016.002l4.223.993c.344-.798 1.138-1.36 2.065-1.36 1.229 0 2.231 1.004 2.231 2.234 0 1.232-1.003 2.234-2.231 2.234s-2.23-1.004-2.23-2.23l-3.851-.912-1.467 4.477c2.65.105 5.047.854 6.844 2.021.494-.464 1.144-.719 1.833-.719 1.498 0 2.718 1.213 2.718 2.711 0 .987-.54 1.886-1.378 2.365.029.255.059.494.059.749-.015 3.938-4.806 7.143-10.72 7.143l-.034.009zm8.179-19.187c-.74 0-1.34.599-1.34 1.338 0 .738.6 1.34 1.34 1.34.732 0 1.33-.6 1.33-1.334 0-.733-.598-1.332-1.347-1.332l.017-.012z"/>
  </symbol>
</svg>

    <header class="header">
  <amp-img alt="Bubble"
    width="128px"
    height="128px"
    class="logo"
    src="/img/avatar.jpg"
    sizes="(max-width: 800px) 36px, 128px">
  </amp-img>
  
    <h2 class="title"><a href="https://LhengXu.github.io" title="Bubble">Bubble</a></h2>
  
  <p class="subtitle">I can do what I w do</p>
  <button class="menu-toggle" type="button" on="tap:sidebar.open">
    <span class="icon icon-menu"></span>
  </button>

  
  <nav class="menu">
    <ul class="menu-list">
      
      
      
      
    </ul>
  </nav>

  <ul class="social-list">
  
  <li class="social-item">
    <a href="mailto:929638723@qq.com" title="Email">
      <svg class="icon" fill="currentColor"><use xlink:href="#icon-email" /></svg>
    </a>
  </li>
  

  
  <li class="social-item">
    <a href="//github.com/LhengXu" title="GitHub">
      <svg class="icon" fill="currentColor"><use xlink:href="#icon-github" /></svg>
    </a>
  </li>
  

  

  

  

  

  

  

  

  

  <li class="social-item">
    <a href="/index.xml" title="RSS">
      <svg class="icon" fill="currentColor"><use xlink:href="#icon-rss" /></svg>
    </a>
  </li>
</ul>

</header>

    <amp-sidebar id="sidebar" class="sidebar" layout="nodisplay" side="right">
  <ul class="sidebar-list">
    <li class="sidebar-menu"><button class="sidebar-icon" on="tap:sidebar.close">X</button></li>
    
    
    
    
  </ul>
</amp-sidebar>

    
  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">Spring学习笔记</h1>
      <p class="entry-meta"><span class="entry-time">Jul 15, 2019</span> 16 min read</p>
    </header>
    

    <article class="post-content">

<h1 id="spring学习笔记">Spring学习笔记</h1>

<h2 id="一-spring入门案例">一、Spring入门案例</h2>

<ol>
<li>通过Idea创建maven项目</li>
<li>配置spring配置文件ApplicationContext.xml</li>
<li>编写接口及实现类</li>

<li><p>IaccountDao</p>

<p>```java
/**</p>

<ul>
<li><p>账户的持久层接口
*/
public interface IAccountDao {</p>

<p>/**</p>

<ul>
<li><p>模拟保存账户
*/
void saveAccount();
}</p>

<pre><code>
- IaccountService

```java
/**
* 账户业务层的接口
*/
public interface IAccountService {
    
/**
* 模拟保存账户
*/
void saveAccount();
}
</code></pre></li>
</ul></li>
</ul></li>
</ol>

<ul>
<li><p>AccountDaoImpl</p>

<p>```java
/**</p>

<ul>
<li><p>账户的持久层实现类
*/
public class AccountDaoImpl implements IAccountDao {</p>

<p>public  void saveAccount(){</p>

<pre><code>System.out.println(&quot;保存了账户&quot;);
</code></pre>

<p>}
}</p>

<pre><code>
- AccountServiceImpl

```java
/**
* 账户的业务层实现类
*/
public class AccountServiceImpl implements IAccountService {
    
private IAccountDao accountDao = new AccountDaoImpl();
    
public void  saveAccount(){
    accountDao.saveAccount();
}
}
</code></pre></li>
</ul></li>
</ul>

<ol>
<li><p>编写测试类Client</p>

<p>```java
/**</p>

<ul>
<li><p>模拟一个表现层，用于调用业务层
*/
public class Client {
/**
*
*获取IOC的核心容器，并根据id获取对象</p>

<ul>
<li><p>@param args
*/
public static void main(String[] args) {
ApplicationContext ac = new ClassPathXmlApplicationContext(&ldquo;beans.xml&rdquo;);
// 两种不同的方式获取Bean对象
IAccountService as = (IAccountService) ac.getBean(&ldquo;accountService&rdquo;);
IAccountDao adao = ac.getBean(&ldquo;accountDao&rdquo;,IAccountDao.class);
System.out.println(as);
System.out.println(adao);
//        as.saveAccount();
}
}</p>

<pre><code>
    

ApplicationContext的三个常用实现类：

- ClassPathXmlApplicationContext： 它可以加载路径下的配置文件，要求配置文件必须在路径下，否则加载不了

```java
ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);
</code></pre></li>
</ul></li>
</ul></li>
</ol>

<ul>
<li><p>FileSyetemXmlApplicationContext：它可以加载磁盘下任意路径下的配置文件（必须有访问权限）</p>

<p>加载方式如下：</p>

<pre><code class="language-java">ApplicationContext ac=newFileSystemXmlApplicationContext(&quot;C:\\user\\greyson\\...&quot;)
</code></pre>

<ul>
<li>AnnotationConfigApplicationContext：它是用于读取注解创建容器的</li>
</ul>

<p>核心容器的两个接口引发出来的问题</p>

<ul>
<li>ApplicationContext：它在创建核心容器时，创建对象采取的策略是采用立即加载的方式，也就是说，只要一读取完配置文件就马上创建配置文件中配置的对象</li>
<li>单例对象适用</li>
<li>开发中常采用此接口</li>
<li>BeanFactory:它在构建核心容器时，创建对象的策略是采用延迟加载的方式，什么时候获取id对象了，什么时候就创建对象。</li>
<li>多例对象适用</li>
</ul>

<h2 id="二-spring中bean的细节">二、Spring中Bean的细节</h2>

<h3 id="1-三种创建bean对象的方式">1.三种创建bean对象的方式</h3>

<p>(1) 使用默认构造函数创建</p>

<p>在spring的配置文件中，使用id和class属性之后，且没有其他属性和标签时，采用的就是默认构造函数创建bean对象，此时如果类中没有默认构造函数，则对象无法创建。</p>

<pre><code class="language-java">&lt;bean id = &quot;accountService&quot; class = &quot;com.itheima.service.impl.AccountServiceImpl&quot;&gt;&lt;/bean&gt;
</code></pre></li>
</ul>

<p>(2) 使用普通工厂中的方法创建对象（使用某个类中的方法创建对象，并存入spring容器）,如下</p>

<pre><code class="language-java">/**
 *模拟一个工厂类，该类可能存在于jar包中，无法通过修改源码的方式来提供默认构造函数
 * 
 */
public class InstanceFactory {
    public IAccountService getAccountService() {
        return new AccountServiceImpl();
    }
}
</code></pre>

<p>配置方式如下：</p>

<pre><code class="language-java">&lt;bean id = &quot;instanceFactory&quot; class = &quot;com.itheima.factory.InstanceFactory&quot;&gt;&lt;/bean&gt;
&lt;bean id = &quot;accountService&quot; factory-bean=&quot;instanceFactory&quot; 
 factory-method=&quot;getAccountService&quot;&gt;&lt;/bean&gt;
</code></pre>

<p>(3) 使用工厂中的静态方法创建对象（使用某个类中的静态方法创建对象，并存入spring容器），如下：</p>

<pre><code>public class StaticFactory {
    public  static IAccountService getAccountService() {

        return new AccountServiceImpl();
    }
}
</code></pre>

<p>配置方式如下：</p>

<pre><code>&lt;bean id = &quot;accountService&quot; class = &quot;com.itheima.factory.StaticFactory&quot; factory-method=&quot;getAccountService&quot;&gt;&lt;/bean&gt;
</code></pre>

<h3 id="2-bean的作用范围调整">2.bean的作用范围调整</h3>

<p>(1) bean标签的scope属性</p>

<p>作用：用于指定bean的作用范围</p>

<p>取值：常用的就是单例和多例</p>

<ul>
<li>singletond : 单例的（default）</li>
<li>prototype : 多例的</li>
<li>request : 作用于web应用的请求范围</li>
<li>session : 作用于web应用的会话范围</li>
<li>global-session : 作用于集群的会话范围（全局会话范围），当不是集群范围时，它就是session</li>
</ul>

<p><img src="session-988affbd-bff9-48fc-bb1d-5e135fe32082.png" alt="" /></p>

<p>(2) bean对象的声明周期</p>

<p>单例对象：</p>

<ul>
<li>出生：当容器创建时发生</li>
<li>活着：只要容器还在对象就一直活着</li>
<li>死亡：容器销毁，对象消亡</li>
</ul>

<p>总结：单例对象的声明周期和容器相同</p>

<p>多例对象：</p>

<ul>
<li>出生：当我们使用对象时spring框架为我们创建</li>
<li>活着：对象只要是在使用过程中就活着</li>
<li>死亡：当对象长时间不用，且没有别的对象引用时，由Java的GC回收</li>
</ul>

<h2 id="三-依赖注入-dependency-injection">三、依赖注入（Dependency Injection）</h2>

<h3 id="1-概述">1.概述</h3>

<p>IOC的作用：减低程序间的耦合（即依赖关系）</p>

<p>在当前类需要用到其他类的对象，由spring为我们提供，而我们在配置文件中说明依赖关系的维护，这种方式就称为依赖注入。</p>

<p>能注入的数据：</p>

<ul>
<li>基本类型和String</li>
<li>其他bean类型（在配置文件中或者注解中配置过的bean）</li>
<li>复杂类型/集合类型</li>
</ul>

<h3 id="2-注入方式">2.注入方式</h3>

<p>1.第一种：使用构造函数提供</p>

<p>使用的标签：constructor-arg</p>

<p>标签所在位置：bean标签的内部</p>

<p>标签中的属性：</p>

<ul>
<li>type : 用于指定要注入的数据类型，该类型也是构造函数中某个或某些参数的类型</li>
<li>index : 用于指定要注入的数据给构造函数中指定索引位置的参数赋值，索引的位置时从0开始</li>
<li>name(常用) : 用于指定给构造函数中指定名称的参数赋值</li>
<li>value : 用于提供基本类型和String类型的数据</li>
<li>ref : 用于指定其他的bean类型数据。它指的就是在spring的IOC核心容器出现过的bean对象</li>
</ul>

<p>例：</p>

<pre><code class="language-java">public class AccountServiceImpl implements IAccountService {
    // 如果时经常变化的数据不适用于依赖注入，此处仅为演示
    private String name;
    private Integer age;
    private Date birthday;

    public AccountServiceImpl(String name, Integer age, Date birthday){
        this.name = name;
        this.age = age;
        this.birthday = birthday;
    }

    public void  saveAccount() {
        System.out.println(&quot;service中的saveaccount()执行了&quot;);
    }

}
</code></pre>

<p>测试类：</p>

<pre><code class="language-java">public static void main(String[] args) {
        //1.获取核心容器对象
        ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);
        //2.根据id获取Bean对象
        IAccountService as  = (IAccountService)ac.getBean(&quot;accountService&quot;);
        as.saveAccount();
    }
</code></pre>

<p>配置如下：</p>

<pre><code class="language-java">&lt;bean id = &quot;accountService&quot; class = &quot;com.itheima.service.impl.AccountServiceImpl&quot;&gt;
        &lt;constructor-arg name = &quot;name&quot; value=&quot;taylor&quot;&gt;&lt;/constructor-arg&gt;
        &lt;constructor-arg name = &quot;age&quot; value = &quot;23&quot;&gt;&lt;/constructor-arg&gt;
        &lt;constructor-arg name = &quot;birthday&quot; ref = &quot;now&quot;&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt;

    &lt;bean id = &quot;now&quot; class = &quot;java.util.Date&quot;&gt;&lt;/bean&gt;
</code></pre>

<p>特点：在获取bean对象时，注入数据是必须的操作，否则无法操作成功</p>

<p>弊端：改变了bean对象的实例化方式，使我们在用不到这些数据的情况下也必须提供带参构造函数，因此开发中较少使用此方法，除非避无可避</p>

<p>2.第二种：使用set方法提供（更常用的方式）</p>

<p>使用的标签：property</p>

<p>出现的位置：bean标签的内部</p>

<p>标签的属性：</p>

<p>name : 用于指定注入时所使用的set方法</p>

<p>value : 用于提供基本类型和String类型的数据</p>

<p>ref : 用于指定其他的bean类型数据，它指的就是在Spring容器中出现过的bean对象</p>

<p>优势：创建对象时没有明确的限制，可以直接使用默认构造函数</p>

<p>弊端：如果有某个成员必须有值，是有可能set方法没有执行</p>

<p>(1) 基本类型和String的注入方式</p>

<pre><code class="language-java">public class AccountServiceImpl implements IAccountService {
    // 如果时经常变化的数据不适用于依赖注入，此处仅为演示
    private String name;
    private Integer age;
    private Date birthday;

    public void setName(String name) {
        this.name = name;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    public void setBirthday(Date birthday) {
        this.birthday = birthday;
    }

    public void  saveAccount() {
        System.out.println(&quot;service中的saveaccount()执行了&quot; + name + &quot;,&quot; + age + &quot;,&quot; +birthday);
    }

}
</code></pre>

<p>配置如下：</p>

<pre><code class="language-java">&lt;bean id = &quot;accountService&quot; class = &quot;com.itheima.service.impl.AccountServiceImpl&quot;&gt;
        &lt;property name=&quot;name&quot; value =&quot;taylor&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;age&quot; value=&quot;21&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;birthday&quot; ref=&quot;now&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;bean id = &quot;now&quot; class = &quot;java.util.Date&quot;&gt;&lt;/bean&gt;
</code></pre>

<p>测试类同上</p>

<p>(2) 复杂集合类型的注入方式</p>

<p>用于给List结构集合注入的标签</p>

<ul>
<li>list</li>
<li>array</li>
<li>set</li>
</ul>

<p>用于给map结构集合注入的标签</p>

<ul>
<li>map</li>
<li>properties</li>
</ul>

<p>结构相同，标签可以互换，因此开发中只要记住两组标签即可</p>

<p>类：</p>

<pre><code class="language-java">public class AccountServiceImpl implements IAccountService {

    private String[] myStrs;
    private List&lt;String&gt; myList;
    private Set&lt;String&gt; mySet;
    private Map&lt;String, String&gt; myMap;
    private Properties myProps;

    public void setMyStrs(String[] myStrs) {
        this.myStrs = myStrs;
    }

    public void setMyList(List&lt;String&gt; myList) {
        this.myList = myList;
    }

    public void setMySet(Set&lt;String&gt; mySet) {
        this.mySet = mySet;
    }

    public void setMyMap(Map&lt;String, String&gt; myMap) {
        this.myMap = myMap;
    }

    public void setMyProps(Properties myProps) {
        this.myProps = myProps;
    }

    public void  saveAccount() {
        System.out.println(Arrays.toString(myStrs));
        System.out.println(myList);
        System.out.println(myMap);
        System.out.println(mySet);
        System.out.println(myProps);
    }

}
</code></pre>

<p>配置如下：</p>

<pre><code class="language-java">&lt;bean id = &quot;accountService&quot; class = &quot;com.itheima.service.impl.AccountServiceImpl&quot;&gt;
        &lt;!--以下三个标签是等价的，set未列出--&gt;
        &lt;property name=&quot;myList&quot;&gt;
            &lt;list&gt;
                &lt;value&gt;aaa&lt;/value&gt;
                &lt;value&gt;bbb&lt;/value&gt;
            &lt;/list&gt;
        &lt;/property&gt;

        &lt;property name=&quot;myStrs&quot;&gt;
            &lt;array&gt;
                &lt;value&gt;aaa&lt;/value&gt;
                &lt;value&gt;bbbb&lt;/value&gt;
            &lt;/array&gt;
        &lt;/property&gt;

        &lt;property name=&quot;mySet&quot;&gt;
            &lt;array&gt;
                &lt;value&gt;aaa&lt;/value&gt;
                &lt;value&gt;bbbb&lt;/value&gt;
            &lt;/array&gt;
        &lt;/property&gt;

        &lt;!--以下两种方式等价--&gt;
        &lt;property name=&quot;myMap&quot;&gt;
            &lt;map&gt;
                &lt;!--以下两种配置方式都可以--&gt;
                &lt;entry key=&quot;testA&quot; value=&quot;aaa&quot;&gt;&lt;/entry&gt;
                &lt;entry key=&quot;testA&quot;&gt;
                    &lt;value&gt;bbb&lt;/value&gt;
                &lt;/entry&gt;
            &lt;/map&gt;
        &lt;/property&gt;

        &lt;property name=&quot;myProps&quot;&gt;
            &lt;props&gt;
                &lt;prop key=&quot;testB&quot;&gt;bbb&lt;/prop&gt;
            &lt;/props&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
</code></pre>

<p>3.第三种：使用注解提供</p>

<p><strong>如何使用？</strong></p>

<p>第一步：在类或方法的前面加上注解关键字</p>

<p>第二步：引入约束,注意此处约束多了xmlns:context&hellip;</p>

<p>第三步：添加配置文件，告知spring在创建容器时要扫描的包，配置所需的标签不是在bean约束中，而是一个名称为context的名称孔家和约束中,完整配置如下：</p>

<pre><code class="language-java">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;com.itheima&quot;&gt;&lt;/context:component-scan&gt;
&lt;/beans&gt;
</code></pre>

<p><strong>有哪些注解？</strong></p>

<p>(1)用于创建对象的</p>

<p>作用：等同于xml配置文件中编写一个<bean>标签</p>

<p>@Component</p>

<p>形式：@Component(value=&rdquo; &ldquo;)/@Component(&rdquo; &ldquo;)</p>

<p>作用：用于把当前类对象存入spring容器中</p>

<p>属性：</p>

<p>value : 用于指定bean的id，当我们不写的时候，它的默认值是当前类名，且首字母改小写;当值只有一个的时候可以省略</p>

<p>以下三个注解的作用与@Component完全一样，它们是spring提供的更明确的划分，使三层对象更加清晰</p>

<ul>
<li>@Controller  用于表现层</li>
<li>@Service       用于业务层</li>
<li>@Repository 用于持久层</li>
</ul>

<p>(2) 用于注入数据的</p>

<p>作用：等同于在<bean>标签中写一个<property>标签</p>

<p>@Autowired</p>

<p>作用：自动按照类型注入，只要容器中有唯一的一个bean对象类型和要注入的变量类型匹配，就可以注入成功如果IOC容器中没有任何bean的类型和要注入的变量类型匹配，则报错</p>

<p>出现位置：可以是变量上，也可以是方法上，</p>

<p>细节：在使用注解注入时，set方法就不是必须的了</p>

<p>@Qualifier</p>

<p>作用：在按照类型注入的基础上再按照名称注入，它在给类成员注入时不能单独使用，但是在给方法参数注入          时可以。</p>

<p>属性：</p>

<p>value : 用于指定注入的bean的id</p>

<p>@Resource</p>

<p>作用：直接按照bean的id注入，可以直接使用</p>

<p>属性：</p>

<p>name : 用于指定bean的id</p>

<p>等同于@Autowired+@Qualifier</p>

<p>以上三个注入都只能注入其他bean类型的数据，而基本类型和String类型的数据无法使用上述注解实现。另外，集合类型的注入只能通过xml配置文件实现</p>

<p>@Value</p>

<p>作用：用于注入基本类型和String类型的数据</p>

<p>属性：</p>

<p>value : 用于指定数据的值，它可以使用spring中Spel(即spring的el表达式)</p>

<p>Spel的写法：${表达式}</p>

<p><strong>操作实例：</strong></p>

<p>接口如下：</p>

<pre><code class="language-java">public interface IAccountDao {

    void saveAccount();
}

public interface IAccountService {

    /**
     * 模拟保存账户
     */
    void saveAccount();
}
</code></pre>

<p>实现类：</p>

<pre><code class="language-java">@Service(&quot;accountService&quot;)
public class AccountServiceImpl implements IAccountService {

    @Autowired
    @Qualifier(&quot;accountDao2&quot;)
    private IAccountDao accountDao = null;
    public void  saveAccount() {
            accountDao.saveAccount();
        }
}
</code></pre>

<p>​</p>

<p>​</p>

<pre><code class="language-java">}

@Repository(&quot;accountDao1&quot;)
public class AccountDaoImpl implements IAccountDao {

    public void  saveAccount() {
        System.out.println(&quot;对象创建了111&quot;);
    }

}

@Repository(&quot;accountDao2&quot;)
public class IAccountDaoImpl2 implements IAccountDao{

    public void  saveAccount() {
        System.out.println(&quot;对象创建了222&quot;);
    }
}
</code></pre>

<p>测试类：</p>

<pre><code>public static void main(String[] args) {
        //1.获取核心容器对象
        ClassPathXmlApplicationContext ac = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);
        //2.根据id获取Bean对象
        IAccountService as  = (IAccountService)ac.getBean(&quot;accountService&quot;);

        as.saveAccount();
    }
}
</code></pre>

<p>如上，AccountDaoImpl1和AccountDaoImpl2实现接口IAccountDao,两个类中分别实现了不同的saveAccount()方法，AccountServiceImpl实现接口IAccountService,其中调用了IAccountDao接口。AccountServiceImpl通过注解关键字Autowired去spring容器中寻找accountDao,再根据Qualifier配置的value找到两个dao的实现类中与之相匹配的Repository的值。</p>

<p>(3) 用于改变范围的.0</p>

<p>作用：等同于在<bean>标签中使用scope属性</p>

<p>@Scope</p>

<p>作用：用于指定bean的作用范围</p>

<p>属性：</p>

<p>value : 指定范围的取值，同xml中值，常用为singleton, prototype</p>

<p>(4) 和生命周期相关（了解）</p>

<p>作用：等同于在<bean>标签中使用init-method和destroy-method</p>

<p>@PreDestory</p>

<p>作用：用于指定销毁方法</p>

<p>@Postcontrust</p>

<p>作用：用于指定初始化方法</p>

<h2 id="四-基于xml的ioc案例">四、基于XML的IOC案例</h2>

<ol>
<li><p>创建数据库</p>

<pre><code>create table account(
	id int primary key auto_increment,
	name varchar(40),
	money float
)character set utf8 collate utf8_general_ci;
    
insert into account(name,money) values('aaa',1000);
insert into account(name,money) values('bbb',1000);
insert into account(name,money) values('ccc',1000);
</code></pre></li>

<li><p>文件结构如下</p>

<p><img src="Untitled-b8f378d2-1d05-4829-918a-6674b2da7ca7.png" alt="" /></p></li>

<li><p>创建接口</p>

<ul>
<li><p>IAccountDao</p>

<pre><code class="language-java">public interface IAccountDao {
        
    /**
     * 查询所有
     * @return
     */
    List&lt;Account&gt; findAllAccount();
        
    /**
     * 查询一个
     * @return
     */
    Account findAccountById(Integer accountId);
        
    /**
     * 保存
     * @param account
     */
    void saveAccount(Account account);
        
    /**
     * 更新
     * @param account
     */
    void updateAccount(Account account);
        
    /**
     * 删除
     * @param accountId
     */
    void deleteAccount(Integer accountId);
}
</code></pre>

<ul>
<li>IAccountService</li>
</ul>

<pre><code class="language-java">public interface IAccountService {
        
    /**
     * 查询所有
     * @return
     */
    List&lt;Account&gt; findAllAccount();
        
    /**
     * 查询一个
     * @return
     */
    Account findAccountById(Integer accountId);
        
    /**
     * 保存
     * @param account
     */
    void saveAccount(Account account);
        
    /**
     * 更新
     * @param account
     */
    void updateAccount(Account account);
        
    /**
     * 删除
     * @param accountId
     */
    void deleteAccount(Integer accountId);
}
</code></pre></li>
</ul></li>

<li><p>创建实现类</p>

<ul>
<li><p>AccountDaoImpl</p>

<pre><code class="language-java">public class AccountDaoImpl implements IAccountDao {
        
    private QueryRunner runner;
        
    public void setRunner(QueryRunner runner) {
        this.runner = runner;
    }
        
    public List&lt;Account&gt; findAllAccount() {
        try{
            return runner.query(&quot;select * from account&quot;, new BeanListHandler&lt;Account&gt;(Account.class));
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
        
    public Account findAccountById(Integer accountId) {
        try{
            return runner.query(&quot;select * from account where id = ?&quot;, new BeanHandler&lt;Account&gt;(Account.class),accountId);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
        
    public void saveAccount(Account account) {
        try{
            runner.update(&quot;insert into account(name, money) values(?,?)&quot;, account.getName(),account.getMoney());
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
        
    public void updateAccount(Account account) {
        try{
            runner.update(&quot;update account set name = ?, money = ? where id = ?&quot;, account.getName(),account.getMoney(),account.getId());
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
        
    public void deleteAccount(Integer accountId) {
        try{
            runner.update(&quot;delete from account where id = ?&quot;, accountId);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
</code></pre>

<ul>
<li>AccountServiceImpl</li>
</ul>

<pre><code class="language-java">public class AccountServiceImpl implements IAccountService {
        
    private IAccountDao accountDao;
        
    public void setAccountDao(IAccountDao accountDao) {
        this.accountDao = accountDao;
    }
        
    public List&lt;Account&gt; findAllAccount() {
        return accountDao.findAllAccount();
    }
        
    public Account findAccountById(Integer accountId) {
        return accountDao.findAccountById(accountId);
    }
        
    public void saveAccount(Account account) {
        accountDao.saveAccount(account);
    }
        
    public void updateAccount(Account account) {
        accountDao.updateAccount(account);
    }
        
    public void deleteAccount(Integer accountId) {
        accountDao.deleteAccount(accountId);
    }
}
</code></pre></li>
</ul></li>

<li><p>创建账户实体类</p></li>
</ol>

<ul>
<li><p>Account</p>

<pre><code class="language-java">public class Account implements Serializable {
    
    private Integer id;
    private String name;
    private Float money;
    
    public void setId(Integer id) {
        this.id = id;
    }
    
    public void setName(String name) {
        this.name = name;
    }
    
    public void setMoney(Float money) {
        this.money = money;
    }
    
    public Integer getId() {
        return id;
    }
    
    public String getName() {
        return name;
    }
    
    public Float getMoney() {
        return money;
    }
    
    @Override
    public String toString() {
        return &quot;Account{&quot; +
                &quot;id=&quot; + id +
                &quot;, name='&quot; + name + '\'' +
                &quot;, money=&quot; + money +
                '}';
    }
}
</code></pre>

<ol>
<li>创建测试类</li>
</ol>

<ul>
<li>AccountServiceTest</li>
</ul>

<pre><code class="language-java">public class AccountServiceTest {
    
    @Test
    public void testFindAll() {
        // 1.获取容器
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);
        // 2.得到业务层对象
        IAccountService iAccountService = applicationContext.getBean(&quot;accountService&quot;,IAccountService.class);
        // 3.执行方法
        List&lt;Account&gt; accounts = iAccountService.findAllAccount();
        for (Account account : accounts) {
            System.out.println(account);
        }
    }
    
    @Test
    public void testFindOne() {
        // 1.获取容器
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);
        // 2.得到业务层对象
        IAccountService iAccountService = applicationContext.getBean(&quot;accountService&quot;,IAccountService.class);
        // 3.执行方法
        Account account = iAccountService.findAccountById(1);
        System.out.println(account);
    }
    
    @Test
    public void testSave() {
        Account account = new Account();
        account.setName(&quot;test&quot;);
        account.setMoney(12345f);
        // 1.获取容器
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);
        // 2.得到业务层对象
        IAccountService iAccountService = applicationContext.getBean(&quot;accountService&quot;,IAccountService.class);
        // 3.执行方法
        iAccountService.saveAccount(account);
    }
    
    @Test
    public void testUpdate() {
        // 1.获取容器
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);
        // 2.得到业务层对象
        IAccountService iAccountService = applicationContext.getBean(&quot;accountService&quot;,IAccountService.class);
        // 3.执行方法
        Account account = iAccountService.findAccountById(4);
        account.setMoney(23456f);
        iAccountService.updateAccount(account);
    }
    
    @Test
    public void testDelete() {
        // 1.获取容器
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);
        // 2.得到业务层对象
        IAccountService iAccountService = applicationContext.getBean(&quot;accountService&quot;,IAccountService.class);
        // 3.执行方法
        iAccountService.deleteAccount(4);
    }
}
</code></pre></li>
</ul>

<ol>
<li>配置bean.xml</li>
</ol>

<pre><code class="language-xml">    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
        &lt;!--配置Service--&gt;
        &lt;bean id=&quot;accountService&quot; class=&quot;com.greyson.service.impl.AccountServiceImpl&quot;&gt;
            &lt;!--注入dao--&gt;
            &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    
        &lt;!--配置dao--&gt;
        &lt;bean id=&quot;accountDao&quot; class=&quot;com.greyson.dao.impl.AccountDaoImpl&quot;&gt;
            &lt;!--注入runner--&gt;
            &lt;property name=&quot;runner&quot; ref=&quot;runner&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    
        &lt;!--配置runner--&gt;
        &lt;bean id=&quot;runner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot; scope=&quot;prototype&quot;&gt;
            &lt;!--注入数据源--&gt;
            &lt;constructor-arg name=&quot;ds&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt;
        &lt;/bean&gt;
    
        &lt;!--配置数据源--&gt;
        &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
            &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;
            &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/eesy&quot;&gt;&lt;/property&gt;
            &lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
            &lt;property name=&quot;password&quot; value=&quot;HotteMYSQL&quot;&gt;&lt;/property&gt;
        &lt;/bean&gt;
    &lt;/beans&gt;
</code></pre>

<h2 id="五-基于注解的ioc案例">五、基于注解的IOC案例</h2>

<h3 id="1-xml注解">1.XML注解</h3>

<p>1.配置bean.xml</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;!-- 告知spring在创建容器时要扫描的包 --&gt;
    &lt;context:component-scan base-package=&quot;&quot;&gt;&lt;/context:component-scan&gt;
    &lt;!--配置QueryRunner--&gt;
    &lt;bean id=&quot;runner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot; scope=&quot;prototype&quot;&gt;
        &lt;!--注入数据源--&gt;
        &lt;constructor-arg name=&quot;ds&quot; ref=&quot;dataSource&quot;&gt;&lt;/constructor-arg&gt;
    &lt;/bean&gt;

    &lt;!-- 配置数据源 --&gt;
    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
        &lt;!--连接数据库的必备信息--&gt;
        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/account&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;password&quot; value=&quot;123&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>

<p>2.Service层加上 @Service @Autowired</p>

<pre><code class="language-java">@Service(&quot;accountService&quot;)
public class AccountServiceImp implements AccountService {
    @Autowired
    private AccountDao accountDao;

    public List&lt;Account&gt; findAll() {
        return accountDao.findAll();
    }

    public Account findOneById(Integer id) {
        return accountDao.findOneById(id);
    }

    public void Add(Account account) {
        accountDao.Add(account);
    }

    public void uppdate(Account account) {
        accountDao.uppdate(account);

    }

    public void delete(Integer id) {
        accountDao.delete(id);

    }
}
</code></pre>

<p>3.在Dao层加上@Repository @Autowired 注解</p>

<pre><code class="language-java">@Repository(&quot;accountDao&quot;)
public class AccountDaoImp implements AccountDao {
    @Autowired
    private QueryRunner queryRunner;



    public List&lt;Account&gt; findAll() {
        try {
            return queryRunner.query(&quot;select * from account&quot;,new BeanListHandler&lt;Account&gt;(Account.class));
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
    }

    public Account findOneById(Integer id) {
        try {
            return queryRunner.query(&quot;select * from account where id = ?&quot;,new BeanHandler&lt;Account&gt;(Account.class),id);
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
    }
</code></pre>

<h3 id="2-注解配置">2.注解配置</h3>

<h5 id="1-概述-1">1.概述</h5>

<p>该类是一个配置类，它的作用和bean.xml是一样的</p>

<p>spring中的新注解</p>

<p><strong>Configuration</strong></p>

<p>作用：指定当前类是一个配置类</p>

<p>细节：当配置类作为AnnotationConfigApplicationContext对象创建的参数时，该注解可以不写。</p>

<p><strong>ComponentScan</strong></p>

<p>作用：用于通过注解指定spring在创建容器时要扫描的包</p>

<p>属性：</p>

<p>value：它和basePackages的作用是一样的，都是用于指定创建容器时要扫描的包。</p>

<p>我们使用此注解就等同于在xml中配置了:</p>

<p><context:component-scan base-package="com.itheima"><a href="/context:component-scan">/context:component-scan</a></p>

<p><strong>Bean</strong></p>

<p>作用：用于把当前方法的返回值作为bean对象存入spring的ioc容器中</p>

<p>属性:</p>

<p>name:用于指定bean的id。当不写时，默认值是当前方法的名称</p>

<p>细节：</p>

<p>当我们使用注解配置方法时，如果方法有参数，spring框架会去容器中查找有没有可用的bean对象。</p>

<p>查找的方式和Autowired注解的作用是一样的</p>

<p><strong>Import</strong></p>

<p>作用：用于导入其他的配置类</p>

<p>属性：</p>

<p>value：用于指定其他配置类的字节码。</p>

<p>当我们使用Import的注解之后，有Import注解的类就父配置类，而导入的都是子配置类</p>

<p><strong>PropertySource</strong></p>

<p>作用：用于指定properties文件的位置</p>

<p>属性：</p>

<p>value：指定文件的名称和路径。</p>

<p>关键字：classpath，表示类路径下</p>

<h5 id="2-代码实现">2.代码实现</h5>

<pre><code>1.设置类 SpringConfig.java
</code></pre>

<pre><code class="language-java">@Configuration
@ComponentScan(&quot;com&quot;)
public class SpringConfig {
    @Bean(name=&quot;runner&quot;)
    @Scope(&quot;prototype&quot;)
    public QueryRunner createQueryRunner(DataSource dataSource){
        return new QueryRunner(dataSource);
    }

    @Bean(name=&quot;dataSource&quot;)
    public DataSource createDataSource(){
        try {
            ComboPooledDataSource cp = new ComboPooledDataSource();
            cp.setJdbcUrl(&quot;jdbc:mysql://localhost:3306/springFourDay&quot;);
            cp.setUser(&quot;root&quot;);
            cp.setPassword(&quot;123&quot;);
            cp.setDriverClass(&quot;com.mysql.jdbc.Driver&quot;);
            return cp;
        }catch (Exception e){
            throw new RuntimeException(e);
        }

    }

}
</code></pre>

<p>​   2.修改测试类 AnnotationConfigApplicationContext 获取容器</p>

<pre><code class="language-java">public class AccountTest {
    @Test
    public void findAll(){
        //获取容器
        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(SpringConfig.class);
        //业务层对象
        AccountService accountService = applicationContext.getBean(&quot;accountService&quot;,AccountService.class);
        //执行方法
        List&lt;Account&gt; list = accountService.findAll();
        for(Account account:list){
            System.out.println(account);
        }
    }
</code></pre>

<h2 id="六-spring-整合-junit">六、Spring 整合 Junit</h2>

<p>1、应用程序的入口
    main方法
2、junit单元测试中，没有main方法也能执行
    junit集成了一个main方法
    该方法就会判断当前测试类中哪些方法有 @Test注解
    junit就让有Test注解的方法执行
3、junit不会管我们是否采用spring框架
    在执行测试方法时，junit根本不知道我们是不是使用了spring框架
    所以也就不会为我们读取配置文件/配置类创建spring核心容器
4、由以上三点可知
    当测试方法执行时，没有Ioc容器，就算写了Autowired注解，也无法实现注入</p>

<p>Spring 整合 Junit 的配置过程：</p>

<ol>
<li>导入 Spring 整合 Junit 的 jar ( 坐标 )</li>
</ol>

<pre><code class="language-xml">   &lt;dependency&gt;
       &lt;groupId&gt;org.springframework&lt;/groupId&gt;
       &lt;artifactId&gt;spring-test&lt;/artifactId&gt;
       &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;
   &lt;/dependency&gt;
</code></pre>

<ol>
<li>使用 Junit 提供的一个注解把原有的 main 方法替换了，替换成 Spring 提供的</li>
</ol>

<p>@Runwith</p>

<ol>
<li>告知 Spring 的运行器， Spring 和 ioc 创建是基于 xml 还是注解的，并且说明位置，用到的注解如下</li>
</ol>

<p>@ContextConfiguration</p>

<p>Locations : 指定 xml 文件的位置，加上 classpath 关键字，表示在类路径下</p>

<p>classes : 指定注解类所在地位置</p>

<p>要求junit版本的jar包必须在4.12及以上</p>

<ol>
<li>使用@Autowired 给测试类中的变量注入数据</li>
</ol>

<p>代码（注解）：</p>

<pre><code class="language-java">   @RunWith(SpringJUnit4ClassRunner.class)
   @ContextConfiguration(classes = SpringConfig.class)//注解的方式
   public class AccountTest {
       @Autowired
       //容器
       private AccountService as = null;
           @Test
           public void findAll(){
               //执行方法
               List&lt;Account&gt; list = as.findAll();
               for(Account account:list){
                   System.out.println(account);
               }
           }
</code></pre>

<p>代码（XML）：</p>

<pre><code class="language-java">   @RunWith(SpringJUnit4ClassRunner.class)
   @ContextConfiguration(locations = &quot;classpath:bean.xml&quot;)//注解的方式
   public class AccountTest {
       @Autowired
       //容器
       private AccountService as = null;
           @Test
           public void findAll(){
               //执行方法
               List&lt;Account&gt; list = as.findAll();
               for(Account account:list){
                   System.out.println(account);
               }
           }
</code></pre>

<h2 id="七-事务管理">七.事务管理</h2>

<p>账户的持久层实现类</p>

<pre><code class="language-java">**
 * 账户的持久层实现类
 */
public class AccountDaoImpl implements IAccountDao {

    private QueryRunner runner;
    private ConnectionUtils connectionUtils;

    public void setRunner(QueryRunner runner) {
        this.runner = runner;
    }

    public void setConnectionUtils(ConnectionUtils connectionUtils) {
        this.connectionUtils = connectionUtils;
    }

    @Override
    public List&lt;Account&gt; findAllAccount() {
        try{
            return runner.query(connectionUtils.getThreadConnection(),&quot;select * from account&quot;,new BeanListHandler&lt;Account&gt;(Account.class));
        }catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public Account findAccountById(Integer accountId) {
        try{
            return runner.query(connectionUtils.getThreadConnection(),&quot;select * from account where id = ? &quot;,new BeanHandler&lt;Account&gt;(Account.class),accountId);
        }catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public void saveAccount(Account account) {
        try{
            runner.update(connectionUtils.getThreadConnection(),&quot;insert into account(name,money)values(?,?)&quot;,account.getName(),account.getMoney());
        }catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public void updateAccount(Account account) {
        try{
            runner.update(connectionUtils.getThreadConnection(),&quot;update account set name=?,money=? where id=?&quot;,account.getName(),account.getMoney(),account.getId());
        }catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public void deleteAccount(Integer accountId) {
        try{
            runner.update(connectionUtils.getThreadConnection(),&quot;delete from account where id=?&quot;,accountId);
        }catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    @Override
    public Account findAccountByName(String accountName) {
        try{
            List&lt;Account&gt; accounts = runner.query(connectionUtils.getThreadConnection(),&quot;select * from account where name = ? &quot;,new BeanListHandler&lt;Account&gt;(Account.class),accountName);
            if(accounts == null || accounts.size() == 0){
                return null;
            }
            if(accounts.size() &gt; 1){
                throw new RuntimeException(&quot;结果集不唯一，数据有问题&quot;);
            }
            return accounts.get(0);
        }catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}

</code></pre>

<p>账户的业务实现层 old</p>

<pre><code class="language-java">/**
 * 账户的业务层实现类
 *
 * 事务控制应该都是在业务层
 */
public class AccountServiceImpl_OLD implements IAccountService{

    private IAccountDao accountDao;
    private TransactionManager txManager;

    public void setTxManager(TransactionManager txManager) {
        this.txManager = txManager;
    }

    public void setAccountDao(IAccountDao accountDao) {
        this.accountDao = accountDao;
    }

    @Override
    public List&lt;Account&gt; findAllAccount() {
        try {
            //1.开启事务
            txManager.beginTransaction();
            //2.执行操作
            List&lt;Account&gt; accounts = accountDao.findAllAccount();
            //3.提交事务
            txManager.commit();
            //4.返回结果
            return accounts;
        }catch (Exception e){
            //5.回滚操作
            txManager.rollback();
            throw new RuntimeException(e);
        }finally {
            //6.释放连接
            txManager.release();
        }

    }

    @Override
    public Account findAccountById(Integer accountId) {
        try {
            //1.开启事务
            txManager.beginTransaction();
            //2.执行操作
            Account account = accountDao.findAccountById(accountId);
            //3.提交事务
            txManager.commit();
            //4.返回结果
            return account;
        }catch (Exception e){
            //5.回滚操作
            txManager.rollback();
            throw new RuntimeException(e);
        }finally {
            //6.释放连接
            txManager.release();
        }
    }

    @Override
    public void saveAccount(Account account) {
        try {
            //1.开启事务
            txManager.beginTransaction();
            //2.执行操作
            accountDao.saveAccount(account);
            //3.提交事务
            txManager.commit();
        }catch (Exception e){
            //4.回滚操作
            txManager.rollback();
        }finally {
            //5.释放连接
            txManager.release();
        }

    }

    @Override
    public void updateAccount(Account account) {
        try {
            //1.开启事务
            txManager.beginTransaction();
            //2.执行操作
            accountDao.updateAccount(account);
            //3.提交事务
            txManager.commit();
        }catch (Exception e){
            //4.回滚操作
            txManager.rollback();
        }finally {
            //5.释放连接
            txManager.release();
        }

    }

    @Override
    public void deleteAccount(Integer acccountId) {
        try {
            //1.开启事务
            txManager.beginTransaction();
            //2.执行操作
            accountDao.deleteAccount(acccountId);
            //3.提交事务
            txManager.commit();
        }catch (Exception e){
            //4.回滚操作
            txManager.rollback();
        }finally {
            //5.释放连接
            txManager.release();
        }

    }

    @Override
    public void transfer(String sourceName, String targetName, Float money) {
        try {
            //1.开启事务
            txManager.beginTransaction();
            //2.执行操作

            //2.1根据名称查询转出账户
            Account source = accountDao.findAccountByName(sourceName);
            //2.2根据名称查询转入账户
            Account target = accountDao.findAccountByName(targetName);
            //2.3转出账户减钱
            source.setMoney(source.getMoney()-money);
            //2.4转入账户加钱
            target.setMoney(target.getMoney()+money);
            //2.5更新转出账户
            accountDao.updateAccount(source);

            int i=1/0;

            //2.6更新转入账户
            accountDao.updateAccount(target);
            //3.提交事务
            txManager.commit();

        }catch (Exception e){
            //4.回滚操作
            txManager.rollback();
            e.printStackTrace();
        }finally {
            //5.释放连接
            txManager.release();
        }


    }
}

</code></pre>

<p>连接工具类</p>

<pre><code class="language-java">/**
 * 连接的工具类，它用于从数据源中获取一个连接，并且实现和线程的绑定
 */
public class ConnectionUtils {

    private ThreadLocal&lt;Connection&gt; tl = new ThreadLocal&lt;Connection&gt;();

    private DataSource dataSource;

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    /**
     * 获取当前线程上的连接
     * @return
     */
    public Connection getThreadConnection() {
        try{
            //1.先从ThreadLocal上获取
            Connection conn = tl.get();
            //2.判断当前线程上是否有连接
            if (conn == null) {
                //3.从数据源中获取一个连接，并且存入ThreadLocal中
                conn = dataSource.getConnection();
                tl.set(conn);
            }
            //4.返回当前线程上的连接
            return conn;
        }catch (Exception e){
            throw new RuntimeException(e);
        }
    }

    /**
     * 把连接和线程解绑
     */
    public void removeConnection(){
        tl.remove();
    }
}
</code></pre>

<p>和事务管理相关的工具类</p>

<pre><code class="language-java">
/**
 * 和事务管理相关的工具类，它包含了，开启事务，提交事务，回滚事务和释放连接
 */
public class TransactionManager {

    private ConnectionUtils connectionUtils;

    public void setConnectionUtils(ConnectionUtils connectionUtils) {
        this.connectionUtils = connectionUtils;
    }

    /**
     * 开启事务
     */
    public  void beginTransaction(){
        try {
            connectionUtils.getThreadConnection().setAutoCommit(false);
        }catch (Exception e){
            e.printStackTrace();
        }
    }

    /**
     * 提交事务
     */
    public  void commit(){
        try {
            connectionUtils.getThreadConnection().commit();
        }catch (Exception e){
            e.printStackTrace();
        }
    }

    /**
     * 回滚事务
     */
    public  void rollback(){
        try {
            connectionUtils.getThreadConnection().rollback();
        }catch (Exception e){
            e.printStackTrace();
        }
    }


    /**
     * 释放连接
     */
    public  void release(){
        try {
            connectionUtils.getThreadConnection().close();//还回连接池中
            connectionUtils.removeConnection();
        }catch (Exception e){
            e.printStackTrace();
        }
    }
}
</code></pre>

<p>bean.xml</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;!--配置代理的service--&gt;
    &lt;bean id=&quot;proxyAccountService&quot; factory-bean=&quot;beanFactory&quot; factory-method=&quot;getAccountService&quot;&gt;&lt;/bean&gt;

    &lt;!--配置beanfactory--&gt;
    &lt;bean id=&quot;beanFactory&quot; class=&quot;com.itheima.factory.BeanFactory&quot;&gt;
        &lt;!-- 注入service --&gt;
        &lt;property name=&quot;accountService&quot; ref=&quot;accountService&quot;&gt;&lt;/property&gt;
        &lt;!-- 注入事务管理器 --&gt;
        &lt;property name=&quot;txManager&quot; ref=&quot;txManager&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

     &lt;!-- 配置Service --&gt;
    &lt;bean id=&quot;accountService&quot; class=&quot;com.itheima.service.impl.AccountServiceImpl&quot;&gt;
        &lt;!-- 注入dao --&gt;
        &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!--配置Dao对象--&gt;
    &lt;bean id=&quot;accountDao&quot; class=&quot;com.itheima.dao.impl.AccountDaoImpl&quot;&gt;
        &lt;!-- 注入QueryRunner --&gt;
        &lt;property name=&quot;runner&quot; ref=&quot;runner&quot;&gt;&lt;/property&gt;
        &lt;!-- 注入ConnectionUtils --&gt;
        &lt;property name=&quot;connectionUtils&quot; ref=&quot;connectionUtils&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!--配置QueryRunner--&gt;
    &lt;bean id=&quot;runner&quot; class=&quot;org.apache.commons.dbutils.QueryRunner&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;

    &lt;!-- 配置数据源 --&gt;
    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;
        &lt;!--连接数据库的必备信息--&gt;
        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/eesy&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;password&quot; value=&quot;1234&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 配置Connection的工具类 ConnectionUtils --&gt;
    &lt;bean id=&quot;connectionUtils&quot; class=&quot;com.itheima.utils.ConnectionUtils&quot;&gt;
        &lt;!-- 注入数据源--&gt;
        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;

    &lt;!-- 配置事务管理器--&gt;
    &lt;bean id=&quot;txManager&quot; class=&quot;com.itheima.utils.TransactionManager&quot;&gt;
        &lt;!-- 注入ConnectionUtils --&gt;
        &lt;property name=&quot;connectionUtils&quot; ref=&quot;connectionUtils&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre>

<h2 id="八-动态代理">八.动态代理</h2>

<p><img src="https://github.com/greysonOuyang/Greyson-blog/raw/master/-d7c45db4-1f69-4b5c-b5f5-a9624176e6f8.png" alt="img" /></p>

<h4 id="基于接口的动态代理">基于接口的动态代理</h4>

<pre><code class="language-java">    /**
     * 动态代理：
     *  特点：字节码随用随创建，随用随加载
     *  作用：不修改源码的基础上对方法增强
     *  分类：
     *      基于接口的动态代理
     *      基于子类的动态代理
     *  基于接口的动态代理：
     *      涉及的类：Proxy
     *      提供者：JDK官方
     *  如何创建代理对象：
     *      使用Proxy类中的newProxyInstance方法
     *  创建代理对象的要求：
     *      被代理类最少实现一个接口，如果没有则不能使用
     *  newProxyInstance方法的参数：
     *      ClassLoader：类加载器
     *          它是用于加载代理对象字节码的。和被代理对象使用相同的类加载器。固定写法。
     *      Class[]：字节码数组
     *          它是用于让代理对象和被代理对象有相同方法。固定写法。
     *      InvocationHandler：用于提供增强的代码
     *          它是让我们写如何代理。我们一般都是些一个该接口的实现类，通常情况下都是匿名内部类，但不是必须的。
     *          此接口的实现类都是谁用谁写。
     */
     Producer cglibProducer = (Producer)Enhancer.create(producer.getClass(), new MethodInterceptor() {
            /**
             * 执行被代理对象的任何方法都会经过该方法
             * @param proxy
             * @param method
             * @param args
             *    以上三个参数和基于接口的动态代理中invoke方法的参数是一样的
             * @param methodProxy ：当前执行方法的代理对象
             * @return
             * @throws Throwable
             */
            @Override
            public Object intercept(Object proxy, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {
                //提供增强的代码
                Object returnValue = null;

                //1.获取方法执行的参数
                Float money = (Float)args[0];
                //2.判断当前方法是不是销售
                if(&quot;saleProduct&quot;.equals(method.getName())) {
                    returnValue = method.invoke(producer, money*0.8f);
                }
                return returnValue;
            }
        });
        cglibProducer.saleProduct(12000f);
    }
}

</code></pre>

<h4 id="基于子类的动态代理">基于子类的动态代理</h4>

<pre><code class="language-java">
/**
 * 模拟一个消费者
 */
public class Client {

    public static void main(String[] args) {
        final Producer producer = new Producer();

        /**
         * 动态代理：
         *  特点：字节码随用随创建，随用随加载
         *  作用：不修改源码的基础上对方法增强
         *  分类：
         *      基于接口的动态代理
         *      基于子类的动态代理
         *  基于子类的动态代理：
         *      涉及的类：Enhancer
         *      提供者：第三方cglib库
         *  如何创建代理对象：
         *      使用Enhancer类中的create方法
         *  创建代理对象的要求：
         *      被代理类不能是最终类
         *  create方法的参数：
         *      Class：字节码
         *          它是用于指定被代理对象的字节码。
         *
         *      Callback：用于提供增强的代码
         *          它是让我们写如何代理。我们一般都是些一个该接口的实现类，通常情况下都是匿名内部类，但不是必须的。
         *          此接口的实现类都是谁用谁写。
         *          我们一般写的都是该接口的子接口实现类：MethodInterceptor
         */
        Producer cglibProducer = (Producer)Enhancer.create(producer.getClass(), new MethodInterceptor() {
            /**
             * 执行北地阿里对象的任何方法都会经过该方法
             * @param proxy
             * @param method
             * @param args
             *    以上三个参数和基于接口的动态代理中invoke方法的参数是一样的
             * @param methodProxy ：当前执行方法的代理对象
             * @return
             * @throws Throwable
             */
            @Override
            public Object intercept(Object proxy, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {
                //提供增强的代码
                Object returnValue = null;

                //1.获取方法执行的参数
                Float money = (Float)args[0];
                //2.判断当前方法是不是销售
                if(&quot;saleProduct&quot;.equals(method.getName())) {
                    returnValue = method.invoke(producer, money*0.8f);
                }
                return returnValue;
            }
        });
        cglibProducer.saleProduct(12000f);
    }
}

</code></pre>

<h2 id="九-aop">九.AOP</h2>

<p>AOP采取的是横向抽取机制，取代了传统纵向继承体系重复性代码。</p>

<p><strong>那么何为软件的横向和纵向？</strong></p>

<p>从纵向结构来看就是我们软件的各个模块，它所负责的是软件的核心业务（如购商品购买、添加购物车等）；从横向来看的话，软件的各个模块之间又有所关联，其中会包含一些公共模块（例如日志、权限等）；这些公共模块可以存在于各个核心业务中，而AOP的处理将两者分离，使开发人员可以专注于核心业务的开发，提高了开发效率。</p>

<p>我们知道在单体架构下的软件开发中，一个大型项目通常是依照功能拆分成各个模块。但是如日志、安全和事务管理此类重要且繁琐的开发却没有必要参与到各个模块中，将这些功能与业务逻辑相关的模块分离就是面向切面编程所要解决的问题</p>

<p><strong>AOP底层原理</strong></p>

<p>使用动态代理实现</p>

<p>（1）基于JDK的代理</p>

<pre><code>适用于有接口情况，使用动态代理创建接口实现类代理对象
</code></pre>

<p>（2）基于CGLIB动态代理</p>

<pre><code>适用于没有接口情况，使用动态代理创建类的子类代理对象
</code></pre>

<p><strong>spring中基于XML的AOP配置步骤</strong>
        1、把通知Bean也交给spring来管理
        2、使用aop:config标签表明开始AOP的配置
        3、使用aop:aspect标签表明配置切面
                id属性：是给切面提供一个唯一标识
                ref属性：是指定通知类bean的Id。
        4、在aop:aspect标签的内部使用对应标签来配置通知的类型
               我们现在示例是让printLog方法在切入点方法执行之前之前：所以是前置通知
               aop:before：表示配置前置通知
                    method属性：用于指定Logger类中哪个方法是前置通知
                    pointcut属性：用于指定切入点表达式，该表达式的含义指的是对业务层中哪些方法增强</p>

<p><strong>切入点表达式的写法</strong>：
            关键字：execution(表达式)
            表达式：
                访问修饰符  返回值  包名.包名.包名&hellip;类名.方法名(参数列表)
            标准的表达式写法：
                public void com.itheima.service.impl.AccountServiceImpl.saveAccount()
            访问修饰符可以省略
                void com.itheima.service.impl.AccountServiceImpl.saveAccount()
            返回值可以使用通配符，表示任意返回值</p>

<pre><code>            * com.itheima.service.impl.AccountServiceImpl.saveAccount()
                    包名可以使用通配符，表示任意包。但是有几级包，就需要写几个*.
            * *.*.*.*.AccountServiceImpl.saveAccount())
                    包名可以使用..表示当前包及其子包
            * *..AccountServiceImpl.saveAccount()
                    类名和方法名都可以使用*来实现通配
            * *..*.*()
                    参数列表：
            ​                可以直接写数据类型：
                基本类型直接写名称           int
                引用类型写包名.类名的方式   java.lang.String
            ​                可以使用通配符表示任意类型，但是必须有参数
            ​                可以使用..表示有无参数均可，有参数可以是任意类型
        ​            全通配写法：
            * *..*.*(..)
</code></pre>

<p>​            实际开发中切入点表达式的通常写法：
​                切到业务层实现类下的所有方法
   * com.itheima.service.impl.<em>.</em>(..)</p>

<p>举例：</p>

<p>bean.xml</p>

<pre><code class="language-xml">  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans.xsd
          http://www.springframework.org/schema/aop
          http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
      
      &lt;!-- 配置Logger类 --&gt;
      &lt;bean id=&quot;logger&quot; class=&quot;com.itheima.utils.Logger&quot;&gt;&lt;/bean&gt;
  
      &lt;!--配置AOP--&gt;
      &lt;aop:config&gt;
          &lt;!--配置切面 --&gt;
          &lt;aop:aspect id=&quot;logAdvice&quot; ref=&quot;logger&quot;&gt;
              &lt;!-- 配置通知的类型，并且建立通知方法和切入点方法的关联--&gt;
              &lt;aop:before method=&quot;printLog&quot; pointcut=&quot;execution(* com.itheima.service.impl.*.*(..))&quot;&gt;&lt;/aop:before&gt;
          &lt;/aop:aspect&gt;
      &lt;/aop:config&gt;
</code></pre>

<h4 id="环绕通知与通配符案例">环绕通知与通配符案例</h4>

<p>bean.xml</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;

```
&lt;!-- 配置srping的Ioc,把service对象配置进来--&gt;
&lt;bean id=&quot;accountService&quot; class=&quot;com.itheima.service.impl.AccountServiceImpl&quot;&gt;&lt;/bean&gt;
```

```
&lt;!-- 配置Logger类 --&gt;
&lt;bean id=&quot;logger&quot; class=&quot;com.itheima.utils.Logger&quot;&gt;&lt;/bean&gt;

&lt;!--配置AOP--&gt;
&lt;aop:config&gt;
    &lt;!-- 配置切入点表达式 id属性用于指定表达式的唯一标识。expression属性用于指定表达式内容
          此标签写在aop:aspect标签内部只能当前切面使用。
          它还可以写在aop:aspect外面，此时就变成了所有切面可用
		  但是要注意，由于约束，所以必须写在前面
      --&gt;
    &lt;aop:pointcut id=&quot;pt1&quot; expression=&quot;execution(* com.itheima.service.impl.*.*(..))&quot;&gt;&lt;/aop:pointcut&gt;
    &lt;!--配置切面 --&gt;
    &lt;aop:aspect id=&quot;logAdvice&quot; ref=&quot;logger&quot;&gt;
        &lt;!-- 配置前置通知：在切入点方法执行之前执行
        &lt;aop:before method=&quot;beforePrintLog&quot; pointcut-ref=&quot;pt1&quot; &gt;&lt;/aop:before&gt;--&gt;

        &lt;!-- 配置后置通知：在切入点方法正常执行之后值。它和异常通知永远只能执行一个
        &lt;aop:after-returning method=&quot;afterReturningPrintLog&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:after-returning&gt;--&gt;

        &lt;!-- 配置异常通知：在切入点方法执行产生异常之后执行。它和后置通知永远只能执行一个
        &lt;aop:after-throwing method=&quot;afterThrowingPrintLog&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:after-throwing&gt;--&gt;

        &lt;!-- 配置最终通知：无论切入点方法是否正常执行它都会在其后面执行
        &lt;aop:after method=&quot;afterPrintLog&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:after&gt;--&gt;

        &lt;!-- 配置环绕通知 详细的注释请看Logger类中--&gt;
        &lt;aop:around method=&quot;aroundPringLog&quot; pointcut-ref=&quot;pt1&quot;&gt;&lt;/aop:around&gt;
    &lt;/aop:aspect&gt;
&lt;/aop:config&gt;
```

&lt;/beans&gt;
</code></pre>

<p>Logger类</p>

<pre><code class="language-java">package com.itheima.utils;

import org.aspectj.lang.ProceedingJoinPoint;

/**

- 用于记录日志的工具类，它里面提供了公共的代码
  */
  public class Logger {

  /**

  - 前置通知
    */
    public  void beforePrintLog(){
    System.out.println(&quot;前置通知Logger类中的beforePrintLog方法开始记录日志了。。。&quot;);
    }

  /**

  - 后置通知
    */
    public  void afterReturningPrintLog(){
    System.out.println(&quot;后置通知Logger类中的afterReturningPrintLog方法开始记录日志了。。。&quot;);
    }
    /**
  - 异常通知
    */
    public  void afterThrowingPrintLog(){
    System.out.println(&quot;异常通知Logger类中的afterThrowingPrintLog方法开始记录日志了。。。&quot;);
    }

  /**

  - 最终通知
    */
    public  void afterPrintLog(){
    System.out.println(&quot;最终通知Logger类中的afterPrintLog方法开始记录日志了。。。&quot;);
    }

  /**

  - 环绕通知

  - 问题：

  - 当我们配置了环绕通知之后，切入点方法没有执行，而通知方法执行了。

  - 分析：

  - 通过对比动态代理中的环绕通知代码，发现动态代理的环绕通知有明确的切入点方法调用，而我们的代码中没有。

  - 解决：

  - Spring框架为我们提供了一个接口：ProceedingJoinPoint。该接口有一个方法proceed()，此方法就相当于明确调用切入点方法。

  - 该接口可以作为环绕通知的方法参数，在程序执行时，spring框架会为我们提供该接口的实现类供我们使用。
    *

  - spring中的环绕通知：

  - 它是spring框架为我们提供的一种可以在代码中手动控制增强方法何时执行的方式。
    */
    public Object aroundPringLog(ProceedingJoinPoint pjp){
    Object rtValue = null;
    try{
        Object[] args = pjp.getArgs();//得到方法执行所需的参数

    ```
    System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。前置&quot;);
    
    rtValue = pjp.proceed(args);//明确调用业务层方法（切入点方法）
    
    System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。后置&quot;);
    
    return rtValue;
    ```

    }catch (Throwable t){
        System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。异常&quot;);
        throw new RuntimeException(t);
    }finally {
        System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。最终&quot;);
    }
    }
    }
</code></pre>

<h4 id="使用注解">使用注解</h4>

<p>bean.xml</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

```
&lt;!-- 配置spring创建容器时要扫描的包--&gt;
&lt;context:component-scan base-package=&quot;com.itheima&quot;&gt;&lt;/context:component-scan&gt;

&lt;!-- 配置spring开启注解AOP的支持 --&gt;
&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
```

&lt;/beans&gt;
</code></pre>

<p>Logger.java</p>

<pre><code class="language-java">/**

- 用于记录日志的工具类，它里面提供了公共的代码
  */
  @Component(&quot;logger&quot;)
  @Aspect//表示当前类是一个切面类
  public class Logger {

  @Pointcut(&quot;execution(* com.itheima.service.impl.*.*(..))&quot;)
  private void pt1(){}

  /**

  - 前置通知
    */
    //    @Before(&quot;pt1()&quot;)
    public  void beforePrintLog(){
    System.out.println(&quot;前置通知Logger类中的beforePrintLog方法开始记录日志了。。。&quot;);
    }

  /**

  - 后置通知
    */
    //    @AfterReturning(&quot;pt1()&quot;)
    public  void afterReturningPrintLog(){
    System.out.println(&quot;后置通知Logger类中的afterReturningPrintLog方法开始记录日志了。。。&quot;);
    }
    /**
  - 异常通知
    */
    //    @AfterThrowing(&quot;pt1()&quot;)
    public  void afterThrowingPrintLog(){
    System.out.println(&quot;异常通知Logger类中的afterThrowingPrintLog方法开始记录日志了。。。&quot;);
    }

  /**

  - 最终通知
    */
    //    @After(&quot;pt1()&quot;)
    public  void afterPrintLog(){
    System.out.println(&quot;最终通知Logger类中的afterPrintLog方法开始记录日志了。。。&quot;);
    }

  /**

  - 环绕通知

  - 问题：

  - 当我们配置了环绕通知之后，切入点方法没有执行，而通知方法执行了。

  - 分析：

  - 通过对比动态代理中的环绕通知代码，发现动态代理的环绕通知有明确的切入点方法调用，而我们的代码中没有。

  - 解决：

  - Spring框架为我们提供了一个接口：ProceedingJoinPoint。该接口有一个方法proceed()，此方法就相当于明确调用切入点方法。

  - 该接口可以作为环绕通知的方法参数，在程序执行时，spring框架会为我们提供该接口的实现类供我们使用。
    *

  - spring中的环绕通知：

  - 它是spring框架为我们提供的一种可以在代码中手动控制增强方法何时执行的方式。
    */
    @Around(&quot;pt1()&quot;)
    public Object aroundPringLog(ProceedingJoinPoint pjp){
    Object rtValue = null;
    try{
        Object[] args = pjp.getArgs();//得到方法执行所需的参数

    ```
    System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。前置&quot;);
    
    rtValue = pjp.proceed(args);//明确调用业务层方法（切入点方法）
    
    System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。后置&quot;);
    
    return rtValue;
    ```

    }catch (Throwable t){
        System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。异常&quot;);
        throw new RuntimeException(t);
    }finally {
        System.out.println(&quot;Logger类中的aroundPringLog方法开始记录日志了。。。最终&quot;);
    }
    }
    }
</code></pre>

<h4 id="不使用xml配置方式">不使用XML配置方式</h4>

<pre><code class="language-java">@Configuration

@ComponentScan(basePackages=&quot;com.sziit&quot;)

@EnableAspectJAutoProxy

public class Logger {}
</code></pre>
</article>
    <footer class="post-footer">
      
      <div class="sharing">
        <a class="share share-facebook" target="_blank" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fLhengXu.github.io%2fpost%2fspring%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%2f" title="Share on Facebook">
          <svg class="icon icon-facebook" fill="currentColor"><use xlink:href="#icon-facebook" /></svg>
        </a>
        <a class="share share-twitter" target="_blank" href="https://twitter.com/intent/tweet/?text=Spring%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0&amp;url=https%3a%2f%2fLhengXu.github.io%2fpost%2fspring%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%2f" title="Share on Twitter">
          <svg class="icon icon-twitter" fill="currentColor"><use xlink:href="#icon-twitter" /></svg>
        </a>
        <a class="share share-google" target="_blank" href="https://plus.google.com/share?url=Spring%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0&amp;url=https%3a%2f%2fLhengXu.github.io%2fpost%2fspring%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%2f" title="Share on Google+">
          <svg class="icon icon-google" fill="currentColor"><use xlink:href="#icon-googleplus" /></svg>
        </a>
      </div>
    </footer>
  </section>

    <footer class="footer">
  <p>Copyright © 2018-2019 Bubble</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/huyb1991/hugo-lamp" title="Hugo LAMP" target="_blank">LAMP</a>.</p>
</footer>





<amp-analytics type=googleanalytics>
  <script type=application/json>
    {
      "vars": { "account": "UA-XXX-X" },
      "triggers": { "trackPageview": { "on": "visible", "request": "pageview" } }
    }
  </script>
</amp-analytics>


  </body>
</html>
